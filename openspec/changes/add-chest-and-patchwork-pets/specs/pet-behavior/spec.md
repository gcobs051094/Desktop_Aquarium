## ADDED Requirements

### Requirement: 寶箱怪寵物定點與開啟動畫
寶箱怪寵物 SHALL 固定於水族箱中一位置（或定點），不移動；使用 `resource/pet/寶箱怪/1_開啟/` 之動畫幀，平時顯示第 0 幀（關閉寶箱）。

#### Scenario: 寶箱怪平時顯示關閉
- **WHEN** 寶箱怪存在於水族箱中且未接近產物時間
- **THEN** 顯示「1_開啟」動畫第 0 幀（關閉寶箱）
- **AND** 寶箱怪不移動

#### Scenario: 接近 3 分鐘時播放開啟動畫
- **WHEN** 寶箱怪產物計時接近 3 分鐘（例如最後約 10 秒）
- **THEN** 依序播放「1_開啟」動畫第 1 幀至第 9 幀，呈現開啟過程
- **AND** 於第 7 幀時在寶箱嘴部位置生成一顆隨機產物（珍珠/金條/鑽石）為可拾取金錢物件

### Requirement: 寶箱怪定時產物
寶箱怪 SHALL 每 3 分鐘（180 秒）產出一次；產物為珍珠（$500）、金條（$1000）、鑽石（$1500）三者隨機其一，依 `config.MONEY_VALUE` 計價；產物於開啟動畫第 7 幀時顯現並加入水族箱金錢列表。

#### Scenario: 3 分鐘產出一次
- **WHEN** 寶箱怪存在且自上次產出已過 180 秒
- **THEN** 觸發開啟動畫並於第 7 幀時在寶箱嘴部生成一顆隨機產物（珍珠/金條/鑽石）
- **AND** 產物計時歸零，重新倒數 180 秒

### Requirement: 拼布魚寵物吃飼料與移動
拼布魚寵物 SHALL 與一般魚相同吃飼料（偵測飼料、吃動作、飽足度增加）；移動速度 SHALL 由 `PET_CONFIG` 設定，且 SHALL 較一般魚快；使用 `resource/pet/拼布魚/` 下 5_吃飽游泳、6_吃飽吃、7_吃飽轉向 動畫。

#### Scenario: 拼布魚吃飼料
- **WHEN** 拼布魚偵測到飼料在可吃範圍內
- **THEN** 播放吃動作動畫並增加飽足度（依飼料成長度或固定值）
- **AND** 飽足度上限為 30

#### Scenario: 拼布魚移動較快
- **WHEN** 拼布魚存在於水族箱中
- **THEN** 移動速度由 `PET_CONFIG["拼布魚"]["speed"]` 決定
- **AND** 該速度 SHALL 大於一般魚的預設速度

### Requirement: 拼布魚飽足度與快樂觸發
拼布魚 SHALL 具飽足度機制，上限 30；當飽足度達 30 時 SHALL 觸發一次「快樂」：全場快樂 buff 剩餘時間設為 30 秒，並將拼布魚飽足度歸零或進入冷卻，避免 30 秒內重複觸發。

#### Scenario: 滿飽足度觸發快樂
- **WHEN** 拼布魚飽足度達到 30
- **THEN** 觸發快樂：設定全場快樂 buff 剩餘時間 30 秒
- **AND** 拼布魚飽足度歸零或進入冷卻
- **AND** 30 秒內其他魚的大便間隔縮短約 5%

### Requirement: 快樂 buff 對魚大便間隔的影響
當全場快樂 buff 剩餘時間大於 0 時，所有魚的大便間隔 SHALL 乘以 0.95（即縮短約 5%）；buff 歸零後恢復原間隔。

#### Scenario: 快樂期間大便間隔縮短
- **WHEN** 快樂 buff 剩餘時間 > 0
- **THEN** 魚類大便計時使用「有效間隔」= `poop_interval_sec * 0.95`
- **AND** buff 歸零後使用原 `poop_interval_sec`
