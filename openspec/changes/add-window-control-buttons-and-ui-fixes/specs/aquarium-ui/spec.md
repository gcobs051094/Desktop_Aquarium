## ADDED Requirements

### Requirement: 視窗控制按鈕
應用程式 SHALL 在視窗右上角提供三個控制按鈕：錨定、隱藏、擊殺。

#### Scenario: 錨定視窗
- **WHEN** 使用者點擊錨定按鈕（⚓）
- **THEN** 按鈕變為藍色，視窗無法拖動
- **AND** 其他交互行為（點擊、投放飼料、拾取金錢等）保持正常

#### Scenario: 取消錨定
- **WHEN** 使用者再次點擊錨定按鈕
- **THEN** 按鈕恢復灰色，視窗可以正常拖動

#### Scenario: 隱藏視窗內容
- **WHEN** 使用者點擊隱藏按鈕（👁）
- **THEN** 所有內容（水族箱、控制面板、投食機等）被隱藏
- **AND** 視窗縮小為只包含控制按鈕的大小
- **AND** 按鈕圖標變為閉眼（🙈）
- **AND** 按鈕保持在螢幕上的相同位置

#### Scenario: 恢復視窗顯示
- **WHEN** 使用者再次點擊隱藏按鈕（🙈）
- **THEN** 所有內容恢復顯示
- **AND** 視窗恢復原始大小和位置
- **AND** 按鈕圖標變為睜眼（👁）

#### Scenario: 開啟擊殺模式
- **WHEN** 使用者點擊擊殺按鈕（⚔）
- **THEN** 按鈕變為紅色
- **AND** 顯示提示視窗「點擊魚會殺死魚喔！」
- **AND** 點擊魚類會觸發死亡動畫
- **AND** 不執行餵食、拾取等操作

#### Scenario: 關閉擊殺模式
- **WHEN** 使用者再次點擊擊殺按鈕
- **THEN** 按鈕恢復灰色
- **AND** 恢復正常的點擊行為（餵食、拾取等）

### Requirement: 擊殺魚類功能
當擊殺模式開啟時，應用程式 SHALL 允許使用者通過點擊來擊殺魚類。

#### Scenario: 擊殺活著的魚
- **WHEN** 擊殺模式開啟且使用者點擊活著的魚
- **THEN** 該魚進入死亡狀態（`set_dead()`）
- **AND** 觸發死亡動畫（灰階、反轉、上移、淡出）
- **AND** 顯示控制台訊息「[擊殺] 擊殺了 {species} (階段: {stage})」

#### Scenario: 無法擊殺已死亡的魚
- **WHEN** 擊殺模式開啟且使用者點擊已死亡的魚
- **THEN** 不執行任何操作

## MODIFIED Requirements

### Requirement: 視窗拖動行為
視窗 SHALL 支援拖動功能，但當錨定模式開啟時，拖動功能 SHALL 被禁用。

#### Scenario: 正常拖動
- **WHEN** 錨定模式未開啟且使用者在視窗上拖動
- **THEN** 視窗跟隨滑鼠移動

#### Scenario: 錨定時無法拖動
- **WHEN** 錨定模式開啟且使用者在視窗上拖動
- **THEN** 視窗不移動
- **AND** 其他交互行為（點擊、拾取金錢等）保持正常

### Requirement: 點擊事件處理
點擊事件 SHALL 根據當前模式執行相應操作。

#### Scenario: 擊殺模式優先
- **WHEN** 擊殺模式開啟且使用者點擊水族箱
- **THEN** 優先檢查是否點到魚類
- **AND** 如果點到魚類，觸發擊殺並返回，不執行其他操作
- **AND** 如果沒點到魚類，直接返回，不執行餵食、拾取等操作

#### Scenario: 正常模式
- **WHEN** 擊殺模式未開啟且使用者點擊水族箱
- **THEN** 按順序檢查：寶箱怪產物、金錢、投放飼料

### Requirement: 投食機飼料清單
投食機的飼料清單 SHALL 不包含重複的飼料項目。

#### Scenario: 避免重複添加
- **WHEN** 投食機顯示飼料清單
- **THEN** 每個飼料項目只出現一次
- **AND** 如果 `resource/feed/` 目錄中已存在金條或鑽石資料夾，則不再重複添加

### Requirement: 應用程式圖標
應用程式 SHALL 在彈出視窗中顯示正確的圖標。

#### Scenario: 打包後顯示圖標
- **WHEN** 應用程式被打包為exe
- **THEN** 所有 QMessageBox 彈出視窗都顯示正確的圖標
- **AND** 優先使用 `icon.ico`，如果不存在則使用 `betta_icon.png`

### Requirement: 控制面板佈局
控制面板 SHALL 將總金額UI放置在底部，避免與右上角控制按鈕在同一列。

#### Scenario: 總金額位置
- **WHEN** 控制面板顯示
- **THEN** 總金額UI位於面板底部（在關閉按鈕之前）
- **AND** 不與右上角控制按鈕在同一水平線上

### Requirement: 切換背景按鈕寬度
切換背景按鈕 SHALL 寬度為面板寬度的一半（減去左右邊距）。

#### Scenario: 按鈕寬度
- **WHEN** 控制面板顯示
- **THEN** 切換背景按鈕寬度為 `(PANEL_WIDTH - 16) // 2` 像素
