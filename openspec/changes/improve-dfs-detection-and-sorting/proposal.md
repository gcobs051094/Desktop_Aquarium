# Change: Improve DFS Detection and Sorting

## Why
在使用DFS自動檢測時遇到兩個主要問題：
1. **區域合併問題**：當兩個目標距離太近時，DFS會將它們識別為一個連通區域，導致錯誤合併
2. **排序問題**：區域編號順序不正確（例如34變成38），影響後續分類和處理
3. **Logo排除問題**：魚分類模式下只處理前7行，導致第8行的魚（60-69）被錯誤排除，而logo區域未被正確識別

## What Changes
- **改進DFS區域分割**：添加自動分割功能，檢測並分離包含多個獨立對象的連通區域
  - 水平瓶頸檢測：掃描區域中間水平線，尋找寬度超過閾值的透明間隙
  - 垂直瓶頸檢測：掃描區域中間垂直線，尋找高度超過閾值的透明間隙
  - 連通組件分析：對大區域重新進行DFS，尋找未連接的子區域
- **改進排序邏輯**：使用區域中心點而非top值進行排序，提高穩定性
  - 基於中心點的y座標分組到行
  - 在每行內按中心點的x座標排序
  - 使用更寬鬆的容差（平均高度的50%或至少10像素）
- **添加分割敏感度參數**：允許用戶調整分割閾值
  - 範圍：0.05-1.0，預設值：0.3
  - 值越小越容易分割（建議0.1-0.3）
- **添加刪除功能**：允許用戶手動刪除錯誤的偵測結果
  - 右鍵點擊預覽區域中的任何偵測框可刪除該區域
  - 自動更新類別索引
  - 顯示確認對話框
- **改進Logo排除邏輯**：自動檢測並排除logo區域
  - 檢測寬高比異常的區域（寬高比 > 3.0 或 < 0.3）
  - 檢測尺寸異常大的區域（寬度或高度超過平均的2.5倍）
  - 處理所有行（不只是7行），但自動排除logo
- **修復魚分類邏輯**：處理所有行，包括第8行的魚（60-69）

## Impact
- **修改能力**：圖片處理工具（image-processing）
- **受影響的代碼**：
  - 修改 `tools/alpha_dfs_crop.py` - 添加區域分割功能、改進排序邏輯、添加分割敏感度參數
  - 修改 `tools/image_cutter_gui.py` - 添加分割敏感度UI、刪除功能、改進logo排除邏輯、修復魚分類邏輯
- **受影響的目錄**：`tools/` 目錄
- **非 BREAKING**：向後兼容，現有功能不受影響，僅添加新功能和改進
