# 透明水族箱視窗應用程式

## 功能說明

這是一個使用 PyQt6 創建的透明桌面水族箱應用程式，具有以下特性：

1. **透明視窗**：視窗背景透明，只有水族箱區域可見
2. **點擊穿透**：透明區域不接收滑鼠事件，實現點擊穿透效果
3. **水族箱區域**：顯示背景圖片，魚類可以在其中游動
4. **魚類游動**：魚類會在水族箱區域內自動游動，並會自動轉向和避開邊界
5. **互動區域**：只有水族箱區域可以接收滑鼠點擊事件

## 檔案結構

- `aquarium_window.py` - 主應用程式檔案，包含透明視窗和水族箱部件
- `fish.py` - 魚類類別，處理魚的動畫、位置和游動邏輯

## 使用方法

### 基本運行

```bash
python aquarium_window.py
```

### 資源要求

應用程式需要以下資源：

1. **背景圖片**：位於 `resource/background/` 目錄下的 JPG 或 PNG 圖片
2. **魚類動畫**：位於 `resource/small_guppy/` 目錄下的動畫幀

如果找不到資源，應用程式會：
- 使用預設的半透明藍色背景（如果沒有背景圖片）
- 顯示警告訊息（如果找不到魚類動畫）

## 功能特性

### 透明視窗

- 使用 `FramelessWindowHint` 創建無邊框視窗
- 使用 `WindowStaysOnTopHint` 讓視窗保持在最上層
- 使用 `WA_TranslucentBackground` 實現透明背景
- 使用 `setMask()` 設定只有水族箱區域可以接收滑鼠事件

### 魚類游動

- 魚類會在水族箱區域內隨機游動
- 自動轉向：每隔一段時間會隨機改變方向
- 邊界檢測：碰到邊界時會自動轉向
- 動畫播放：循環播放魚類動畫幀

### 互動功能

- 點擊水族箱區域會觸發 `clicked` 信號
- 可以在 `on_aquarium_clicked()` 方法中實現投放飼料等功能

## 自訂設定

### 修改水族箱大小

在 `main()` 函數中修改：

```python
window = TransparentAquariumWindow(
    aquarium_size=(800, 600),  # 修改這裡
    background_path=background_path
)
```

### 修改魚類數量

在 `load_fishes()` 方法中修改：

```python
num_fishes = 3  # 修改這裡
```

### 修改魚類行為

在 `load_fishes()` 方法中修改：

```python
animation_frames = load_fish_animation(fish_dir, "5_吃飽游泳")  # 修改行為類型
```

可用的行為類型：
- `"1_餓肚子游泳"`
- `"2_餓肚子轉向"`
- `"3_餓肚子吃"`
- `"4_餓肚子死掉"`
- `"5_吃飽游泳"`（預設）
- `"6_吃飽吃"`
- `"7_吃飽轉向"`

## 技術細節

### 透明視窗實現

使用 PyQt6 的以下特性實現透明視窗：

1. `setWindowFlags()` - 設定視窗標誌
2. `setAttribute(WA_TranslucentBackground)` - 啟用透明背景
3. `setMask()` - 設定可點擊區域

### 魚類動畫

- 使用 `QTimer` 定期更新魚類狀態（約 60 FPS）
- 使用 `QPixmap` 載入和顯示動畫幀
- 根據游動方向自動翻轉魚類圖片

### 性能優化

- 使用 `QPainter` 的高效繪圖功能
- 啟用抗鋸齒渲染
- 合理的動畫更新頻率

## 已知限制

1. 在 Windows 上，透明視窗的點擊穿透可能不完全支援所有情況
2. 魚類動畫的方向翻轉目前只支援水平翻轉
3. 魚類數量過多可能會影響性能

## 未來改進

- [ ] 實現投放飼料功能
- [ ] 添加更多魚類行為（如追蹤食物）
- [ ] 實現魚類生命週期管理
- [ ] 添加更多互動功能
- [ ] 優化透明視窗的點擊穿透效果
